
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Willow is a practical, open source, privacy-focused platform for voice assistants and other applications">
      
      
        <meta name="author" content="toverainc">
      
      
        <link rel="canonical" href="https://heywillow.io/development/">
      
      
        <link rel="prev" href="../hardware/">
      
      
        <link rel="next" href="../features/Home-Assistant/">
      
      
      <link rel="icon" href="../images/logo-purple.svg">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.2.6">
    
    
      
        <title>Development - Willow</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0e669242.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.85d0ee34.min.css">
      
      
  
  
    
    
  
  
  <style>:root{--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6h-2c0-2.8-2.2-5-5-5S7 3.2 7 6H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-7-3c1.7 0 3 1.3 3 3H9c0-1.7 1.3-3 3-3m7 17H5V8h14v12m-7-8c-1.7 0-3-1.3-3-3H7c0 2.8 2.2 5 5 5s5-2.2 5-5h-2c0 1.7-1.3 3-3 3Z"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Raleway";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#development" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Willow" class="md-header__button md-logo" aria-label="Willow" data-md-component="logo">
      
  <img src="../images/logo-purple.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Willow
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Development
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/toverainc/willow" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Willow" class="md-nav__button md-logo" aria-label="Willow" data-md-component="logo">
      
  <img src="../images/logo-purple.svg" alt="logo">

    </a>
    Willow
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/toverainc/willow" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../quick-start-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start Guide
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../get-involved/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Involved!
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../what-willow-is/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What Willow Is (And Isnâ€™t)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../how-willow-works/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How Willow Works
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../hardware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hardware
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Development
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Development
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#build-willow" class="md-nav__link">
    Build Willow
  </a>
  
    <nav class="md-nav" aria-label="Build Willow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-system-dependencies" class="md-nav__link">
    Install System Dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clone-willow-repo" class="md-nav__link">
    Clone Willow Repo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-willow-development-docker-container" class="md-nav__link">
    Build Willow Development Docker Container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-willow-development-docker-container" class="md-nav__link">
    Start Willow Development Docker Container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-build-environment" class="md-nav__link">
    Install Build Environment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-configuration" class="md-nav__link">
    Start Configuration
  </a>
  
    <nav class="md-nav" aria-label="Start Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#willow-configuration" class="md-nav__link">
    Willow Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-and-exit-container" class="md-nav__link">
    Build and Exit Container
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flash-willow-to-your-device" class="md-nav__link">
    Flash Willow to Your Device
  </a>
  
    <nav class="md-nav" aria-label="Flash Willow to Your Device">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-serial-port" class="md-nav__link">
    Set Serial Port
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flash" class="md-nav__link">
    Flash
  </a>
  
    <nav class="md-nav" aria-label="Flash">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flash-from-another-device" class="md-nav__link">
    Flash from Another Device
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-options" class="md-nav__link">
    Advanced Options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exit-serial-monitor" class="md-nav__link">
    Exit Serial monitor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-serial-monitor" class="md-nav__link">
    Start Serial monitor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#things-went-sideways-reset" class="md-nav__link">
    Things Went Sideways - Reset!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recovery" class="md-nav__link">
    Recovery
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../features/Home-Assistant/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home Assistant
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../features/Local-Command-Support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Local Command Support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../features/Wi-Fi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wi-Fi
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Willow Components
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Willow Components
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../willow-components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../components/willow-application-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Willow Application Server  (WAS)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../components/willow-inference-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Willow Inference Server (WIS)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#build-willow" class="md-nav__link">
    Build Willow
  </a>
  
    <nav class="md-nav" aria-label="Build Willow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-system-dependencies" class="md-nav__link">
    Install System Dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clone-willow-repo" class="md-nav__link">
    Clone Willow Repo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-willow-development-docker-container" class="md-nav__link">
    Build Willow Development Docker Container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-willow-development-docker-container" class="md-nav__link">
    Start Willow Development Docker Container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-build-environment" class="md-nav__link">
    Install Build Environment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-configuration" class="md-nav__link">
    Start Configuration
  </a>
  
    <nav class="md-nav" aria-label="Start Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#willow-configuration" class="md-nav__link">
    Willow Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-and-exit-container" class="md-nav__link">
    Build and Exit Container
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flash-willow-to-your-device" class="md-nav__link">
    Flash Willow to Your Device
  </a>
  
    <nav class="md-nav" aria-label="Flash Willow to Your Device">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-serial-port" class="md-nav__link">
    Set Serial Port
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flash" class="md-nav__link">
    Flash
  </a>
  
    <nav class="md-nav" aria-label="Flash">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flash-from-another-device" class="md-nav__link">
    Flash from Another Device
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-options" class="md-nav__link">
    Advanced Options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exit-serial-monitor" class="md-nav__link">
    Exit Serial monitor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-serial-monitor" class="md-nav__link">
    Start Serial monitor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#things-went-sideways-reset" class="md-nav__link">
    Things Went Sideways - Reset!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recovery" class="md-nav__link">
    Recovery
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/toverainc/willow-docs/edit/main/docs/development.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="development">Development<a class="headerlink" href="#development" title="Permanent link">&para;</a></h1>
<p>Configuring and building Willow for the ESP BOX is a multi-step process that is required if you want to do Willow development. We've provided a helper script to make things easier.</p>
<h2 id="build-willow">Build Willow<a class="headerlink" href="#build-willow" title="Permanent link">&para;</a></h2>
<h3 id="install-system-dependencies">Install System Dependencies<a class="headerlink" href="#install-system-dependencies" title="Permanent link">&para;</a></h3>
<p>We use <a href="https://github.com/tio/tio">tio</a> as a serial monitor so you will need to install that.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Ubuntu/Debian</label><label for="__tabbed_1_2">Arch Linux</label><label for="__tabbed_1_3">Mac (with homebrew)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-sh highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>tio
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-sh highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>yay<span class="w"> </span>-S<span class="w"> </span>tio
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-sh highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>brew<span class="w"> </span>install<span class="w"> </span>tio
</span></code></pre></div>
</div>
</div>
</div>
<h3 id="clone-willow-repo">Clone Willow Repo<a class="headerlink" href="#clone-willow-repo" title="Permanent link">&para;</a></h3>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/toverainc/willow.git<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>willow
</span></code></pre></div>
<h3 id="build-willow-development-docker-container">Build Willow Development Docker Container<a class="headerlink" href="#build-willow-development-docker-container" title="Permanent link">&para;</a></h3>
<p>We use <a href="https://www.docker.com/">Docker</a> (also supports <a href="https://podman.io/">Podman</a>) for the build container. To build the container with Docker:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>./utils.sh<span class="w"> </span>build-docker
</span></code></pre></div>
<h3 id="start-willow-development-docker-container">Start Willow Development Docker Container<a class="headerlink" href="#start-willow-development-docker-container" title="Permanent link">&para;</a></h3>
<p>Once the container has finished building you will need to enter it for all following commands:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>./utils.sh<span class="w"> </span>docker
</span></code></pre></div>
<h3 id="install-build-environment">Install Build Environment<a class="headerlink" href="#install-build-environment" title="Permanent link">&para;</a></h3>
<p>Once inside the container install the environment:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>./utils.sh<span class="w"> </span>install
</span></code></pre></div>
<h2 id="start-configuration">Start Configuration<a class="headerlink" href="#start-configuration" title="Permanent link">&para;</a></h2>
<p>Start the Willow configuration process:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>./utils.sh<span class="w"> </span>config
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">ESP BOX LITE NOTE!!!</p>
<p>You will need to build specifically for the ESP BOX LITE. From the main menu, select:</p>
<p><strong><em>Audio HAL ---&gt; Audio Board ---&gt; ESP32-S3-BOX-Lite</em></strong></p>
</div>
<p>Return to main menu and continue.</p>
<h3 id="willow-configuration">Willow Configuration<a class="headerlink" href="#willow-configuration" title="Permanent link">&para;</a></h3>
<p>Navigate to <strong><em>Willow Configuration</em></strong> to enter your Wi-Fi SSID and password (supports 2.4 GHz Wi-Fi with WPA/WPA2/WPA3 authentication), and your Willow Application Server URL.</p>
<p>Once you've provided these press <span class="keys"><kbd class="key-q">Q</kbd></span> and save when prompted.</p>
<h3 id="build-and-exit-container">Build and Exit Container<a class="headerlink" href="#build-and-exit-container" title="Permanent link">&para;</a></h3>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>./utils.sh<span class="w"> </span>build
</span></code></pre></div>
<p>When the build completes successfully you can exit the container.</p>
<h2 id="flash-willow-to-your-device">Flash Willow to Your Device<a class="headerlink" href="#flash-willow-to-your-device" title="Permanent link">&para;</a></h2>
<p>It's getting real now - plug the ESP32-S3-BOX in!</p>
<h3 id="set-serial-port">Set Serial Port<a class="headerlink" href="#set-serial-port" title="Permanent link">&para;</a></h3>
<p>Back on the host docker:</p>
<p>To do anything involving the serial port you will need to set the <code>PORT</code> environment variable for all further invocations of <code>utils.sh</code>.</p>
<p>With recent versions of <code>tio</code> you can use <code>tio -L</code> to list available ports. On Linux you can check <code>dmesg</code> and look for the path of the recently connected ESP32-S3-BOX (furthest at the bottom, hopefully). On Linux it's usually <code>/dev/ACM*</code> and on Mac it's <code>/dev/usbmodem*</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Examples</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Linux</label><label for="__tabbed_2_2">Mac</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-sh highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PORT</span><span class="o">=</span>/dev/ttyACM0
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-sh highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PORT</span><span class="o">=</span>/dev/cu.usbmodem2101
</span></code></pre></div>
</div>
</div>
</div>
</div>
<h3 id="flash">Flash<a class="headerlink" href="#flash" title="Permanent link">&para;</a></h3>
<p>For out of the box/factory new ESP32-S3-BOX hardware you will need to (one time) erase the factory flash before flashing Willow:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>./utils.sh<span class="w"> </span>erase-flash
</span></code></pre></div>
<p>Once you have done that you can flash</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>./utils.sh<span class="w"> </span>flash
</span></code></pre></div>
<p>It should flash and connect you to the serial monitor.</p>
<div class="admonition note">
<p class="admonition-title">If you're encountering flashing issues due to USB passthrough use <code>willow-dist.bin</code> and flash it from a another computer</p>
</div>
<h4 id="flash-from-another-device">Flash from Another Device<a class="headerlink" href="#flash-from-another-device" title="Permanent link">&para;</a></h4>
<p>If you want to quickly and easily flash multiple devices or distribute a combined firmware image you can use the <code>dist</code> arguments to <code>utils.sh</code>:</p>
<p><code>./utils.sh dist</code> - builds the combined flash image (<code>willow-dist.bin</code>)</p>
<p><code>./utils.sh flash-dist</code> - flashes the combined flash image </p>
<p>This combined firmware image can be used with any ESP flashing tool.</p>
<h4 id="advanced-options">Advanced Options<a class="headerlink" href="#advanced-options" title="Permanent link">&para;</a></h4>
<p><code>utils.sh</code> will attempt to load environment variables from <code>.env</code>. You can define your <code>PORT</code> here to avoid needing to define it over and over.</p>
<p>The ESP-IDF, ESP-ADF, ESP-SR, LVGL, etc. libraries have a plethora of configuration options. DO NOT change anything outside of <em>Willow Configuration</em> (other than wake word) unless you know what you are doing.</p>
<h3 id="exit-serial-monitor">Exit Serial monitor<a class="headerlink" href="#exit-serial-monitor" title="Permanent link">&para;</a></h3>
<p>To exit <code>tio</code> you need to press <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-t">T</kbd></span> and then <span class="keys"><kbd class="key-q">Q</kbd></span>. Or you can unplug your device and <code>tio</code> will wait until you reconnect it.</p>
<h3 id="start-serial-monitor">Start Serial monitor<a class="headerlink" href="#start-serial-monitor" title="Permanent link">&para;</a></h3>
<p>If you want to see what your device is up to you can start the serial monitor anytime:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>./utils.sh<span class="w"> </span>monitor
</span></code></pre></div>
<h3 id="things-went-sideways-reset">Things Went Sideways - Reset!<a class="headerlink" href="#things-went-sideways-reset" title="Permanent link">&para;</a></h3>
<p>In the event your environment gets out of whack we have a helper to reset:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>./utils.sh<span class="w"> </span>destroy
</span></code></pre></div>
<p>As the plentiful messages indicate it's a destructive process but it will reset your environment. After it completes you can start from the top and try again.</p>
<h3 id="recovery">Recovery<a class="headerlink" href="#recovery" title="Permanent link">&para;</a></h3>
<p>Recover from a bad flash or persistent flash failures.</p>
<p>In some hardware combinations the ESP32-S3-BOX can be stubborn and won't successfully flash.</p>
<p>In these cases, press the BOOT/CONFIG button (top button on the left side) while powering up the device, then:</p>
<p>Erase the flash:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>./utils.sh<span class="w"> </span>erase-flash
</span></code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Depending on how tight of a boot loop your device is in, you may need to run <code>erase-flash</code> multiple times to get the timing right. It will eventually "catch" and successfully erase the flash.</p>
<p>When it reports successful erase you can flash again with:
<div class="language-sh highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>./utils.sh<span class="w"> </span>flash
</span></code></pre></div></p>
</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../hardware/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Hardware" rel="prev">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Hardware
              </div>
            </div>
          </a>
        
        
          
          <a href="../features/Home-Assistant/" class="md-footer__link md-footer__link--next" aria-label="Next: Home Assistant" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Home Assistant
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 Tovera, Inc. â€“ <a href="#__consent">cookie settings</a> 

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/toverainc" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:team@tovera.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.7l167.6-182.9c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.tovera.com" target="_blank" rel="noopener" title="www.tovera.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 256c0-46.6 12.47-90.4 34.27-128.9L144.1 318.3C166 357.5 207.9 384 256 384c14.3 0 27.1-2.3 40.8-6.6l-76.3 132.2C95.9 492.3 0 385.3 0 256zm365.1 65.6c12.3-19.2 18.9-42.5 18.9-65.6 0-38.2-16.8-72.5-43.3-96h152.7c12 29.6 18.6 62.1 18.6 96 0 141.4-114.6 255.1-256 256l109.1-190.4zM477.8 128H256c-62.9 0-113.7 44.1-125.5 102.7L54.19 98.47C101 38.53 174 0 256 0c94.8 0 177.5 51.48 221.8 128zM168 256c0-48.6 39.4-88 88-88s88 39.4 88 88-39.4 88-88 88-88-39.4-88-88z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  
    
  



  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.tabs.link", "navigation.footer", "navigation.instant", "navigation.tracking", "navigation.sections", "navigation.indexes", "toc.follow", "navigation.top", "content.action.edit", "toc.follow"], "search": "../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.78eede0e.min.js"></script>
      
    
  </body>
</html>